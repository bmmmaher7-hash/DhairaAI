import streamlit as st
from groq import Groq

# 1. Page Config
st.set_page_config(page_title="Dhaira AI", page_icon="⚡")

# 2. Design
st.markdown("<style>.stApp { background-color: #0d1117; color: white; }</style>", unsafe_allow_index=True)

# 3. Header
st.title("⚡ Dhaira AI System")
st.write("Developed by: [Your Name]")

# 4. API Connection (Your Secret Key)
client = Groq(api_key="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")

# 5. Memory
if "messages" not in st.session_state:
    st.session_state.messages = []

for msg in st.session_state.messages:
    st.chat_message(msg["role"]).write(msg["content"])

# 6. Chat Logic
if prompt := st.chat_input("Ask me anything..."):
    st.session_state.messages.append({"role": "user", "content": prompt})
    st.chat_message("user").write(prompt)

    # 7. AI Brain (Llama 3.3 70B)
    response = client.chat.completions.create(
        messages=[
            {"role": "system", "content": "You are a professional AI assistant named Dhaira AI. You are fast and accurate."},
            {"role": "user", "content": prompt}
        ],
        model="llama-3.3-70b-versatile",
    )
    
    answer = response.choices[0].message.content
    st.session_state.messages.append({"role": "assistant", "content": answer})
    st.chat_message("assistant").write(answer)
